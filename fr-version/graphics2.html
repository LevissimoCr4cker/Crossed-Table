<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Distribution des Crit√®res d'√âcole</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  /* === YOUR AESTHETIC === */
* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
html, body { height: 100%; overflow: hidden; }
body { background: #f8fafc; color: #1e293b; line-height: 1.6; display: flex; flex-direction: column; }

  .controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin: 20px auto;
    max-width: 600px;
    flex-wrap: wrap;
  }
  .controls label {
    font-size: 16px;
    color: #333;
  }


  /* === HEADER === */
header {
  background: #1e40af;
  color: white;
  padding: 0.8rem 1.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  z-index: 1000;
  flex-shrink: 0;
}

header h1 {
  font-size: 1.4rem;
  font-weight: 600;
}


  .hamburger {
    position: absolute;
    right: 20px;
    font-size: 1.6rem;
    cursor: pointer;
    padding: 8px;
    border-radius: 6px;
    transition: background 0.3s;
  }
  .hamburger:hover { background: rgba(255,255,255,0.2); }

  /* === MENU OVERLAY === */
  .menu-overlay {
    position: fixed;
    top: 0; left: 0; width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.7);
    backdrop-filter: blur(8px);
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.4s ease;
    z-index: 999;
  }
  .menu-overlay.active {
    opacity: 1;
    visibility: visible;
  }
  .menu-content {
    background: rgba(59,130,246,0.98);
    padding: 2.5rem 1.5rem;
    border-radius: 16px;
    width: 90%;
    max-width: 400px;
    text-align: center;
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    transform: scale(0.8);
    transition: transform 0.4s ease;
  }
  .menu-overlay.active .menu-content { transform: scale(1); }
  .menu-content ul { list-style: none; margin-top: 1rem; padding: 0; }
  .menu-content li { margin: 0.8rem 0; }
  .menu-content a {
    color: white;
    text-decoration: none;
    font-size: 1.1rem;
    font-weight: 500;
    display: block;
    padding: 0.6rem 1.2rem;
    border-radius: 10px;
    transition: all 0.3s;
  }
  .menu-content a:hover {
    background: rgba(255,255,255,0.2);
    transform: translateX(6px);
  }

    .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin: 20px auto;
      max-width: 600px;
      flex-wrap: wrap;
      background: rgba(255, 255, 255, 0.95);
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(3px);
    }

    select {
      padding: 10px 15px;
      font-size: 1rem;
      border: none;
      border-radius: 5px;
      background: rgba(244, 248, 253, 0.7);
      color: #4b4444;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    select:hover {
      background: rgba(223, 227, 236, 0.8);
      transform: translateY(-2px);
    }

    select:focus {
      outline: 2px solid #9598a2;
    }

    .controls label {
      color: #4b5563;
      font-weight: 600;
    }


  .chart-container {
    width: 60%;
    max-width: 600px;
    margin: 40px auto;
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px #ccc;
  }
  canvas {
    width: 100% !important;
    height: 300px !important;
  }
  h2 {
    margin-bottom: 10px;
  }
  .return-btn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 10px 20px;
    font-size: 16px;
    background: white;
    color: #333;
    border: 1px solid #ccc;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 0 10px #ccc;
    transition: background-color 0.2s, box-shadow 0.2s;
  }
  .return-btn:hover {
    background: #f0f0f0;
    box-shadow: 0 0 12px #bbb;
  }
  .pie-chart-btn {
    position: fixed;
    bottom: 20px;
    left: 20px;
    padding: 10px;
    font-size: 1.5rem;
    background: white;
    color: #333;
    border: 1px solid #ccc;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 10px #ccc;
    transition: background-color 0.2s, box-shadow 0.2s;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .pie-chart-btn:hover {
    background: #f0f0f0;
    box-shadow: 0 0 12px #bbb;
  }
  @media (max-width: 600px) {
    body {
      margin: 20px;
    }
    .controls {
      flex-direction: column;
      gap: 15px;
    }
    select {
      width: 100%;
      max-width: 300px;
    }
    .chart-container {
      width: 100%;
      margin: 20px auto;
      padding: 15px;
    }
    canvas {
      height: 250px !important;
    }
    .return-btn {
      bottom: 15px;
      right: 15px;
      padding: 8px 16px;
      font-size: 14px;
    }
    .pie-chart-btn {
      bottom: 15px;
      left: 15px;
      width: 40px;
      height: 40px;
      font-size: 1.2rem;
    }

    @media (max-width: 600px) {
    header { font-size: 1.2rem; padding: 10px 16px; }
    header h1 { font-size: 1.2rem; margin-left: 12px; }
    .controls { flex-direction: column; gap: 15px; }
    select { width: 100%; max-width: 300px; }
    .chart-container { width: 100%; margin: 20px auto; padding: 15px; }
    canvas { height: 250px !important; }
    .return-btn, .pie-chart-btn { bottom: 15px; }
    .return-btn { right: 15px; padding: 8px 16px; font-size: 14px; }
    .pie-chart-btn { left: 15px; width: 40px; height: 40px; font-size: 1.2rem; }
  }

  
  }
</style>
</head>
<body>

<header>
  <h1>Distribution des √âcoles</h1>
  <div class="hamburger" onclick="toggleMenu()">
    <i class="fas fa-bars"></i>
  </div>
</header>

<!-- MENU OVERLAY -->
<div id="menu-overlay" class="menu-overlay">
  <div class="menu-content">
    <ul>
      <li><a href="index.html" onclick="closeMenu()">Accueil</a></li>
      <li><a href="find.html" onclick="closeMenu()">Recherche d'√âcole</a></li>
      <li><a href="stats4.html" onclick="closeMenu()">Classement</a></li>
      <li><a href="edc2.html" onclick="closeMenu()">Classification EDC</a></li>
    </ul>
  </div>
</div>

<div class="controls">
  <label for="criterion">S√©lectionner le Crit√®re:</label>
  <select id="criterion">
    <option value="Scholarship">Bourses</option>
    <option value="Academic Quality">Qualit√© Acad√©mique</option>
    <option value="Employment Opportunities">Opportunit√©s d'Emploi</option>
    <option value="Innovation">Innovation</option>
    <option value="International">International</option>
    <option value="Research">Recherche</option>
    <option value="Infrastructure">Infrastructure</option>
    <option value="Sports">Sports</option>
    <option value="Food">Restauration</option>
    <option value="Environment">Environnement</option>
  </select>
</div>

<div id="charts"></div>

<!-- Button -->

<!-- Script -->

<button class="pie-chart-btn" onclick="window.location.href='graph3.html'" title="Voir Graphiques Circulaires">ü•ß</button>

<script>

  

  
   function goHome() {
  // Try relative path first
  const mainPage = "index.html"; // adjust if needed
  window.location.href = mainPage;
}

  let schools = [];
  let currentChart = null;
  const criteria = [
    "Scholarship",
    "Academic Quality",
    "Employment Opportunities",
    "Innovation",
    "International",
    "Research",
    "Infrastructure",
    "Sports",
    "Food",
    "Environment"
  ];

  // Load CSV data
  async function loadCSV() {
    const response = await fetch("../data.csv");
    const text = await response.text();
    const lines = text.trim().split("\n");
    const headers = lines[0].split(",");
    schools = lines.slice(1).map(line => {
      const values = line.split(",");
      const obj = {};
      headers.forEach((h, i) => {
        const key = h.trim();
        const value = values[i]?.trim();
        obj[key] = isNaN(value) ? value : Number(value);
      });
      return obj;
    });
    updateChart(); // Render initial chart
  }

  // Get counts of schools for scores 1-5 for a criterion
  function getCounts(criterion) {
    const counts = [0, 0, 0, 0, 0];
    schools.forEach(school => {
      const val = school[criterion];
      if (val >= 1 && val <= 5) {
        counts[val - 1]++;
      }
    });
    return counts;
  }

  // Create bar chart for a given criterion
  function createBarChart(criterion) {
    const chartsDiv = document.getElementById("charts");
    chartsDiv.innerHTML = ''; // Clear previous chart
    const counts = getCounts(criterion);
    
    const container = document.createElement("div");
    container.className = "chart-container";
    chartsDiv.appendChild(container);

    const title = document.createElement("h2");
    title.textContent = "";
    container.appendChild(title);

    const canvas = document.createElement("canvas");
    container.appendChild(canvas);

    if (currentChart) {
      currentChart.destroy(); // Destroy previous chart
    }
    currentChart = new Chart(canvas.getContext("2d"), {
      type: "bar",
      data: {
        labels: ["1 √©toile", "2 √©toiles", "3 √©toiles", "4 √©toiles", "5 √©toiles"],
        datasets: [{
          label: `Nombre d'√âcoles`,
          data: counts,
          backgroundColor: ["#f44336", "#ff9800", "#ffeb3b", "#4caf50", "#2196f3"]
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: {
            beginAtZero: true,
            max: 50, // Set y-axis max to 50
            ticks: {
              precision: 0,
              stepSize: 10
            },
            title: {
              display: true,
              text: "Nombre d'√âcoles"
            }
          },
          x: {
            title: {
              display: true,
              text: "Score"
            }
          }
        },
        plugins: {
          legend: { display: false },
          title: {
            display: false
          }
        },
        animation: {
          duration: 1000, // Smooth animation duration
          easing: 'easeOutQuart', // Smooth, slightly bouncy easing
          y: {
            from: 0 // Bars grow from bottom
          }
        }
      }
    });
  }

  // Update chart based on selected criterion
  function updateChart() {
    const criterion = document.getElementById("criterion").value;
    createBarChart(criterion);
  }

  // Main function to initialize
  async function init() {
    await loadCSV();
    document.getElementById("criterion").addEventListener("change", updateChart);
  }

  init();

  // MENU
  function toggleMenu() {
    document.getElementById("menu-overlay").classList.toggle("active");
  }
  function closeMenu() {
    document.getElementById("menu-overlay").classList.remove("active");
  }

  // Close menu if clicking outside the menu content
document.getElementById('menu-overlay').addEventListener('click', function(e) {
  if (!e.target.closest('.menu-content')) {
    closeMenu();
  }
});

</script>

</body>

</html>